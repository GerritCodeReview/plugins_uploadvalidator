{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7ec3dbdb_5296dc91",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2023-05-10T11:00:03Z",
      "side": 1,
      "message": "Removing myself. Please feel free to re-add me if anything else I can help with.",
      "revId": "61c314328a306a2dde282abf7b16ca3ac6df79a1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0c7b325d_95ab4faa",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/uploadvalidator/UploadValidatorIT.java",
        "patchSetId": 1
      },
      "lineNbr": 513,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2023-05-04T17:14:32Z",
      "side": 1,
      "message": "Something\u0027s wrong with this inheritance in L539 (when the project parent for childProject is checked in PluginConfig#75, the code sees childProject\u0027s parent as AllProjects, hence ignoring its uploadvalidator config).",
      "range": {
        "startLine": 513,
        "startChar": 27,
        "endLine": 513,
        "endChar": 82
      },
      "revId": "61c314328a306a2dde282abf7b16ca3ac6df79a1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4051c3f3_1411ef24",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/uploadvalidator/UploadValidatorIT.java",
        "patchSetId": 1
      },
      "lineNbr": 513,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2023-05-04T17:21:01Z",
      "side": 1,
      "message": "This line of code [1] returns the tree() iterable for child project as having two parents (project, All-Projects), then skips(1). Could it be that this code used to include current project hence the skipping and this has recently changed?\n\n[1] https://gerrit.googlesource.com/gerrit/+/093158ef483c2089917c2707012b278e8feb60a5/java/com/google/gerrit/server/project/ProjectState.java#353",
      "parentUuid": "0c7b325d_95ab4faa",
      "range": {
        "startLine": 513,
        "startChar": 27,
        "endLine": 513,
        "endChar": 82
      },
      "revId": "61c314328a306a2dde282abf7b16ca3ac6df79a1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59461a20_3edc3b32",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/uploadvalidator/UploadValidatorIT.java",
        "patchSetId": 1
      },
      "lineNbr": 525,
      "author": {
        "id": 1091982
      },
      "writtenOn": "2023-05-04T18:27:44Z",
      "side": 1,
      "message": "```suggestion\n    pushConfig(\n        Joiner.on(\"\\n\").join( \"[access]\",\n        \"inheritFrom \u003d \" + project.get(),\n            \"[plugin \\\"uploadvalidator\\\"]\",\n                             \"    blockedKeywordPattern \u003d secr3t\"),\n        childProject);\n```\n\nApparently these 3 lines were the problem (in this test): the call to pushConfig **overwrites** the existing project config, hence removes the inheritance. If you use my suggestion the test will pass.\n\nAccordingly, this is behaving as expected. PTAL.",
      "range": {
        "startLine": 522,
        "startChar": 4,
        "endLine": 525,
        "endChar": 22
      },
      "revId": "61c314328a306a2dde282abf7b16ca3ac6df79a1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b9e403f_6532e542",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/uploadvalidator/UploadValidatorIT.java",
        "patchSetId": 1
      },
      "lineNbr": 525,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2023-05-05T05:37:30Z",
      "side": 1,
      "message": "Nice find, Youssef!\n\nFWIW I\u0027ve added another test to core to make sure inheritance works as intended: https://gerrit-review.git.corp.google.com/c/gerrit/+/372795",
      "parentUuid": "59461a20_3edc3b32",
      "range": {
        "startLine": 522,
        "startChar": 4,
        "endLine": 525,
        "endChar": 22
      },
      "revId": "61c314328a306a2dde282abf7b16ca3ac6df79a1",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}